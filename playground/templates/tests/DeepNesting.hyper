# Deeply nested control structures and HTML
app: dict

<div class="app">
    if app.get('loaded'):
        <div class="content">
            for section in app.get('sections', []):
                <section>
                    if section.get('visible'):
                        match section['type']:
                            case 'header':
                                <header>
                                    <h1>{section['title']}</h1>
                                </header>
                            case 'content':
                                <main>
                                    for block in section.get('blocks', []):
                                        <div class="block">
                                            if block['type'] == 'text':
                                                <p>{block['content']}</p>
                                            elif block['type'] == 'list':
                                                <ul>
                                                    for item in block['items']:
                                                        <li>{item}</li>
                                                    end
                                                </ul>
                                            end
                                        </div>
                                    end
                                </main>
                            case 'footer':
                                <footer>
                                    <p>{section.get('text', '')}</p>
                                </footer>
                        end
                    end
                </section>
            end
        </div>
    else:
        <div class="loading">Loading...</div>
    end
</div>

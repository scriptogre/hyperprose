# Function definitions inside templates
items: list[dict]

# Helper function defined in template
def format_price(price: float) -> str:
    return f"${price:.2f}"
end

def render_item(item: dict):
    <div class="item">
        <span class="name">{item['name']}</span>
        <span class="price">{format_price(item['price'])}</span>
    </div>
end

# Main template content
<div class="item-list">
    for item in items:
        render_item(item)
    end

    total = sum(item['price'] for item in items)
    <div class="total">
        <strong>Total: {format_price(total)}</strong>
    </div>
</div>
